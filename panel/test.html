<!-- META DATA -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keywords" content="">

<!-- FAVICON -->
<link rel="shortcut icon" type="image/x-icon" href="http://10.211.55.3/tienda/panel/assets/images/brand/favicon.ico">

<!-- TITLE -->
<title>Panel de Administracion - Diagnostika Diesel Global</title>

<!-- BOOTSTRAP CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">







<form id="formCaracteristicas">
    <input type="hidden" name="id_producto" value="21">
    <!-- Botón de envío -->
    <div class="col-12 text-end mt-3">
        <button type="submit" class="btn btn-info">
            <i class="fe fe-save me-1"></i> Guardar
        </button>
    </div>

</form>

<!-- Modal de Resultado -->
<div class="modal fade" id="resultadoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-3 shadow">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title">Resultado</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Cerrar"></button>
            </div>
            <div class="modal-body text-center" id="resultadoMensaje"></div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-info" id="cerrarModalBtn">Aceptar</button>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("formCaracteristicas");
        const resultadoModalEl = document.getElementById("resultadoModal");
        const resultadoMensaje = document.getElementById("resultadoMensaje");
        const cerrarModalBtn = document.getElementById("cerrarModalBtn");

        if (form) {
            form.addEventListener("submit", function (e) {
                e.preventDefault();

                const formData = new FormData(form);

                fetch("caract_productos.php", {
                    method: 'POST',
                    body: formData
                })
                    .then(res => res.json())
                    .then(data => {
                        resultadoMensaje.innerText = data.mensaje;

                        const resultadoModal = new bootstrap.Modal(resultadoModalEl);
                        resultadoModal.show();

                        cerrarModalBtn.onclick = () => {
                            resultadoModal.hide();
                            if (data.success) {
                                window.location.href = "productos.php";
                            }
                        };
                    })
                    .catch(err => {
                        console.error("Error en la solicitud:", err);
                        resultadoMensaje.innerText = "Error al procesar la solicitud.";
                        const resultadoModal = new bootstrap.Modal(resultadoModalEl);
                        resultadoModal.show();
                    });
            });
        }
    });
</script>